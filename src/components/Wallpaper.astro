---
import one from "../wallpapers/1.jpg";
import two from "../wallpapers/2.jpg";
---

<input type="checkbox" id="show-wallpaper" />
<label for="show-wallpaper" id="show-wallpaper-lbl"
  >Показать <strong>Модель</strong><b>Сайт</b>
</label>
<div id="wallpaper" class="wallpaper">
  <div data-wallpaper-index="0" data-wallpaper-set={[one, two]}></div>
</div>
<script>
  const wallpaper = document.querySelector("#wallpaper div");
  const wallpaperSet = wallpaper.dataset.wallpaperSet.split(",");
  wallpaper.addEventListener("animationiteration", (e) => {
    let n = Number(e.target.dataset.wallpaperIndex);
    n = n < wallpaperSet.length - 1 ? n + 1 : 0;
    const newWallpaper = wallpaperSet[n];
    console.log({ n, newWallpaper });
    e.target.dataset.wallpaperIndex = n;
    wallpaper.style.backgroundImage = `url(${newWallpaper})`;
  });
</script>
<style is:global>
  /* Wallpaper */

  @keyframes breath {
    0% {
      transform: scale(1) rotate(0);
      opacity: 0;
    }
    10% {
      opacity: 1;
    }
    50% {
      transform: scale(1.1) rotate(-1deg);
    }
    95% {
      opacity: 1;
    }
    100% {
      transform: scale(1) rotate(1deg);
      opacity: 0;
    }
  }
  #show-wallpaper {
    display: none;
  }

  #show-wallpaper:checked + #show-wallpaper-lbl b {
    display: inline;
  }

  #show-wallpaper:checked + #show-wallpaper-lbl strong {
    display: none;
  }

  #show-wallpaper-lbl {
    background-color: var(--color-bg-opacity);
    position: fixed;
    top: 0;
    left: 0;
    z-index: 30;
    cursor: pointer;
  }

  #main-holder:has(~ #show-wallpaper:checked) {
    display: none;
  }

  #main-holder:has(~ #show-wallpaper-lbl:hover) {
    opacity: 0.4;
  }
  /*  */
  #show-wallpaper-lbl b {
    display: none;
  }

  .wallpaper {
    background-color: var(--color-bg-opacity-light);
    position: fixed;
    inset: 0;
    z-index: -10;
  }
  .wallpaper div {
    background-image: url(/src/wallpapers/1.jpg);
    animation: breath 20s linear infinite;
    background-repeat: no-repeat;
    background-position: 50% 0;
    background-size: cover;
    background-attachment: fixed;
    height: 100%;
  }
</style>
